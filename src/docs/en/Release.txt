How to make a release
*********************

Preparing and testing GIT
=========================

* Make sure that version numbers in 
    configure.in
    src/includes/globals.h
  are correct for the upcoming version.

* Update NEWS with highlights since the last release 

* Make sure that GemRB GIT is in compilable and runnable state
  - download a clean GIT tree and test it.
  - Make distribution .tar.gz (see Source release below) and test it as well -
    especially make sure all needed files are included.

* Tag current GIT to version number e.g. v0.9.0
  i.e. in the gemrb root directory do
    git tag -a -m "GemRB 0.9.0" v0.9.0
    git push origin v0.9.0
* Update from GIT to the tagged version
    git checkout v0.9.0

* After you're done, update the version with a -git suffix, so it will be
  easier to tell if people are running release builds or not

Source release
==============

* on Unix/Linux: 
  make dist


Linux binary release
====================

  ./autogen.sh
  ./configure --prefix=/usr/local
  make
  make install DESTDIR=/tmp/fakeroot
  cd /tmp/fakeroot/usr/local
  copy ~/GemRB-binary.cfg over etc/GemRB.cfg, rename to etc/gemrb.cfg
  strip bin/gemrb lib/* lib/gemrb/*
  sudo chown -R 0:0 *
  sudo tar cvzf ../gemrb-0.2.5-linux_i386.tar.gz *


Windows binary release
======================

* FIXME: To be defined....


Release and Announcements
=========================

* Write the release notes if necessary. They are mainly for packagers, so
create them if there are structural or build related changes. New config
options should also be mentioned here if they're not part of the changelog.

* Put the tarballs/binaries into Releases on SF
  - create a new directory in the appropriate section by rightclicking
  - mark it for upload
  - upload the release notes
  - upload the file
  - mark the release notes as release notes (popup on leftclick)
  - mark the file to have the release notes and default platforms (popup on leftclick)

* Test the downloads from sourceforge.net

* Announce on homepage, SF, #GemRB in channel and title, Happypenguin and
  Gibberlings3:
    - our forum
    - modding news (Avenger, Theacefes, Grim Squeaker, DavidW and cmorgan have access)
  (a template is available in admin/announcement.template)

* Run admin/restart_news.sh to restart the NEWS cycle
